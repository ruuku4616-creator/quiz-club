<!DOCTYPE html>
<html lang="ja">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ´»å‹•å ±å‘Šä¸€è¦§ - SIQå…¬å¼ã‚µã‚¤ãƒˆ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="menu-btn" id="menu-btn"><span></span><span></span><span></span></div>
    <nav class="nav-menu" id="nav-menu">
        <ul>
            <li><a href="index.html">ãƒ›ãƒ¼ãƒ </a></li>
            <li><a href="active.html">æ´»å‹•å ±å‘Š</a></li>
            <li><a href="quiz.html">SIQä»Šæ—¥ã®ä¸€å•</a></li>
            <li><a href="event.html">å¤§ä¼šç‰¹è¨­</a></li>
            <li><a href="blog-list.html">éƒ¨å“¡ãƒ–ãƒ­ã‚°</a></li>
        </ul>
    </nav>
    <nav>
    <a href="index.html" class="logo-area">
        <img id="site-logo-img" src="" alt="ãƒ­ã‚´" style="display: none; height: 50px; width: auto; margin-right: 10px;">
        <div id="logo-q-placeholder" class="logo-placeholder">Q</div>
        <span id="site-logo-text">Shibaura Institute of Quiz</span>
    </a>
    </nav>

    <div class="container" style="margin-top: 80px;">
        <h1 style="color: var(--accent-green);">æ´»å‹•å ±å‘Š</h1>
        <div class="section">
            <div id="full-list" class="post-grid">èª­ã¿è¾¼ã¿ä¸­...</div>
        </div>
    </div>

    <script>
        async function loadSiteData() {
        try {
            const response = await fetch('data/index.json');
            const data = await response.json();
            
            // ãƒ˜ãƒƒãƒ€ãƒ¼ã¯ç®¡ç†ç”»é¢ã§è¨­å®šã—ãŸè‹±èªåã‚’å‡ºã™
            document.getElementById('site-logo-text').innerText = data.site_title_en || "Shibaura Institute of Quiz";
            
            const logoImg = document.getElementById('site-logo-img');
            if (data.logo_image) {
                logoImg.src = data.logo_image;
                logoImg.style.display = 'inline-block';
                if(document.getElementById('logo-q-placeholder')) {
                    document.getElementById('logo-q-placeholder').style.display = 'none';
                }
            }
        } catch (e) { console.error(e); }
    }
        async function loadList() {
            const list = document.getElementById('full-list');
            try {
                // æ´»å‹•å ±å‘Šã®ãƒªã‚¹ãƒˆã‚’å–å¾—
                const response = await fetch('data/blog-list.json');
                const posts = await response.json();
                
                list.innerHTML = '';

                // ... (å‰ç•¥) ...
for (const name of posts) {
    let thumbUrl = "";
    let postDate = "";
    let postAuthor = "";

    try {
        // ãƒ•ã‚©ãƒ«ãƒ€åã¯ active.html ãªã‚‰ 'blog'ã€blog-list.html ãªã‚‰ 'members_blog'
        const folder = (document.getElementById('full-list')) ? 'blog' : 'members_blog';
        const postRes = await fetch(`data/${folder}/${name}.md`);
        const postText = await postRes.text();
        
        // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡º
        const thumbMatch = postText.match(/thumbnail:\s*["']?(.*?)["']?(\n|$)/);
        const dateMatch = postText.match(/date:\s*["']?(.*?)["']?(\n|$)/);
        const authorMatch = postText.match(/author:\s*["']?(.*?)["']?(\n|$)/);

        if (thumbMatch) thumbUrl = thumbMatch[1];
        if (dateMatch) postDate = dateMatch[1].substring(0, 10); // YYYY-MM-DDå½¢å¼
        if (authorMatch) postAuthor = authorMatch[1];
    } catch (e) { console.log("ãƒ‡ãƒ¼ã‚¿å–å¾—å¤±æ•—:", name); }

    const card = document.createElement('a');
    card.href = `blog.html?folder=${(document.getElementById('full-list')) ? 'blog' : 'members_blog'}&post=${encodeURIComponent(name)}`;
    card.className = 'post-card';
    
    let imageHtml = thumbUrl ? `<img src="${thumbUrl}" class="post-card-thumb" alt="${name}">` : '';
    if (thumbUrl) card.classList.add('has-image');
    
    // ã‚«ãƒ¼ãƒ‰ã®ä¸­èº«ã‚’ãƒªãƒƒãƒã«ã™ã‚‹
    card.innerHTML = `
        ${imageHtml}
        <div class="post-card-content">
            <h3 class="post-card-title">${name}</h3>
            <div class="post-card-meta">
                ${postDate ? `<span>ğŸ“… ${postDate}</span>` : ''}
                ${postAuthor ? `<span>ğŸ‘¤ ${postAuthor}</span>` : ''}
            </div>
            <div class="post-card-more">è¨˜äº‹ã‚’èª­ã‚€ â†’</div>
        </div>
    `;
    list.appendChild(card);
}
            } catch (e) { 
                list.innerHTML = "<p>è¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>"; 
                console.error(e);
            }
        }

        function setupMenu() {
            const menuBtn = document.getElementById('menu-btn');
            const navMenu = document.getElementById('nav-menu');
            
            if (menuBtn && navMenu) {
        // ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§é–‹é–‰
                menuBtn.onclick = (e) => {
                    e.stopPropagation(); // èƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯é€£å‹•ã‚’é˜²ã
                    navMenu.classList.toggle('active');
                };

        // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä»¥å¤–ã®å ´æ‰€ï¼ˆèƒŒæ™¯ï¼‰ã‚’ã‚¿ãƒƒãƒ—ã—ãŸã‚‰é–‰ã˜ã‚‹
                document.onclick = (e) => {
                    if (!navMenu.contains(e.target) && !menuBtn.contains(e.target)) {
                        navMenu.classList.remove('active');
                    }
                };
            }
        }

        window.addEventListener('DOMContentLoaded', () => {
            loadSiteData(); // ãƒ­ã‚´èª­ã¿è¾¼ã¿
            loadList();     // æ´»å‹•å ±å‘Šä¸€è¦§èª­ã¿è¾¼ã¿
            setupMenu();    // â˜…ã“ã“ã‚’è¿½åŠ ï¼ã“ã‚Œã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒå‹•ãã‚ˆã†ã«ãªã‚Šã¾ã™
        });
    </script>
</body>
</html>
















