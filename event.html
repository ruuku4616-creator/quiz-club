<!DOCTYPE html>
<html lang="ja">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大会情報 - クイズ研究会</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="menu-btn" id="menu-btn">
        <span></span>
        <span></span>
        <span></span>
    </div>
    
    <nav class="nav-menu" id="nav-menu">
        <ul>
            <li><a href="index.html">ホーム</a></li>
            <li><a href="active.html">活動報告</a></li>
            <li><a href="quiz.html">SIQ今日の一問</a></li>
            <li><a href="event.html">大会特設</a></li>
            <li><a href="blog-list.html">部員ブログ</a></li>
        </ul>
    </nav>
    
    <nav>
    <a href="index.html" class="logo-area">
        <img id="site-logo-img" src="" alt="ロゴ" style="display: none; height: 50px; width: auto; margin-right: 10px;">
        <div id="logo-q-placeholder" class="logo-placeholder">Q</div>
        <span id="site-logo-text">Shibaura Institute of Quiz</span>
    </a>
    </nav>

    <div class="container" style="margin-top: 80px;">
    <h1 id="ev-title" style="color: var(--accent-green); text-align: center;">読み込み中...</h1>
    
    <div class="section">
        <h2 id="ev-copy">大会概要</h2>
        <table style="margin-top: 20px;">
            <tr><th>開催日</th><td id="ev-date">-</td></tr>
            <tr><th>会場</th><td id="ev-place">-</td></tr>
            <tr><th>定員</th><td id="ev-capacity">-</td></tr>
            <tr><th>参加費</th><td id="ev-fee">-</td></tr>
        </table>
    </div>

    <div class="section">
        <h2>大会ルール・詳細</h2>
        <div id="ev-details">読み込み中...</div>
    </div>

    <div id="entry-area" class="section" style="border: 2px solid var(--accent-green); display: none;">
        <h2>エントリー</h2>
        <div style="text-align: center; margin-top: 20px;">
            <a id="ev-entry-btn" href="#" class="x-link" style="padding: 15px 40px; font-size: 1.1rem; text-decoration: none; display: inline-block; background: var(--accent-green); color: black; border-radius: 5px; font-weight: bold;">エントリーフォームへ</a>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
    // サイト基本データ（ロゴと名称）を読み込む共通関数
async function loadSiteData() {
    try {
        const response = await fetch('data/index.json');
        const data = await response.json();
        
        // サイト名の反映
        const siteTitle = data.site_title || "Shibaura Institute of Quiz";
        document.getElementById('site-logo-text').innerText = siteTitle;
        
        // ロゴ画像の反映
        const logoImg = document.getElementById('site-logo-img');
        const logoPlaceholder = document.getElementById('logo-q-placeholder');
        
        if (data.logo_image) {
            logoImg.src = data.logo_image;
            logoImg.style.display = 'inline-block';
            if (logoPlaceholder) logoPlaceholder.style.display = 'none';
        }
    } catch (e) {
        console.error("ロゴの読み込みに失敗しました:", e);
    }
}
    async function loadEventData() {
        try {
            const response = await fetch('data/event.json');
            const data = await response.json();
            
            document.getElementById('ev-title').innerText = data.event_title;
            document.getElementById('ev-copy').innerText = data.event_copy;
            document.getElementById('ev-date').innerText = data.event_date;
            document.getElementById('ev-place').innerText = data.event_place;
            document.getElementById('ev-capacity').innerText = data.event_capacity;
            document.getElementById('ev-fee').innerText = data.event_fee;
            
            // Markdownの変換
            document.getElementById('ev-details').innerHTML = marked.parse(data.event_details || "");
            
            // エントリーURLがある場合のみボタンを表示
            if (data.entry_url) {
                document.getElementById('entry-area').style.display = 'block';
                document.getElementById('ev-entry-btn').href = data.entry_url;
            }
        } catch (e) {
            console.error("Event data error:", e);
        }
    }
    window.addEventListener('DOMContentLoaded', loadEventData);
</script>e="color: var(--accent-green); text-decoration: none;">← トップページへ戻る</a>
    </div>

    <script>
        const menuBtn = document.getElementById('menu-btn');
        const navMenu = document.getElementById('nav-menu');
        
        menuBtn.addEventListener('click', () => {
            navMenu.classList.toggle('active');
        });
        
        document.addEventListener('click', (e) => {
            if (!menuBtn.contains(e.target) && !navMenu.contains(e.target)) {
                navMenu.classList.remove('active');
            }
        });
        window.addEventListener('DOMContentLoaded', () => {
    loadSiteData(); // ★これを追加
    loadMemberList();
    setupMenu();
});
    </script>
</body>
</html>
